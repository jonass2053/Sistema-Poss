<div class="invoice-container" id="thermal-receipt">
    <div class="header">
        <div class="company-info">
            <div class="company-name">{{factura.empresaObj.razonSocial.toUpperCase()}}</div>
            <div class="company-details">
                <strong>RNC:</strong> {{factura.empresaObj.rnc}}<br>
                <strong>Dirección:</strong> {{factura.sucursalObj.direccion}}<br>
                <strong>Teléfono:</strong> {{factura.sucursalObj.telefono1}}<br>
                <strong>Email:</strong> {{factura.empresaObj.correo}}<br>
            </div>
        </div>
        <div>
            <img style="width: 150px;" src="{{factura.empresaObj.logo}}" alt="Mi logo">
        </div>
        <div class="invoice-title">
            <h1 *ngIf="factura.idTipoDocumento==8">CONDUCE</h1>
            <h1 *ngIf="factura.idTipoDocumento!=8">{{factura.numeracionObj.nombre.toUpperCase()}}</h1>
            <div class="invoice-number">
                <strong>{{factura.numeracion}}</strong><br>
            </div>
        </div>
    </div>

    <div class="invoice-details">
        <div class="bill-to">
            <h3>CLIENTE:</h3>
            <p><strong>{{factura.contacto.nombreRazonSocial}}</strong></p>
            <p>Identificación: {{factura.contacto.rnc || 'N/A'}}</p>
            <p>Dirección: {{factura.contacto.direccion || 'N/A'}}</p>
            <p>Teléfono: {{factura.contacto.telefono1 || 'NA'}} {{factura.contacto.telefono2}}</p>
            <p>Email: {{factura.contacto.correo || 'NA'}}</p>
        </div>

        <div class="invoice-info">
            <h3 *ngIf="factura.idTipoDocumento==8">INFORMACIÓN DE CONDUCE:</h3>
            <h3 *ngIf="factura.idTipoDocumento!=8">INFORMACIÓN DE FACTURA:</h3>
            <p><strong>Fecha de Emisión:</strong> {{factura.fechaCreacion}}</p>
            <p><strong>Vendedor:</strong> {{factura.usuario.nombre + " " + factura.usuario.apellidos}}</p>
        </div>
    </div>

    <table class="items-table">
        <thead>
            <tr>
                <th>CANT.</th>
                <th>CÓDIGO</th>
                <th>DESCRIPCIÓN</th>
                <th *ngIf="factura.idTipoDocumento!=8">PRE. UNIT.</th>
                <th *ngIf="factura.idTipoDocumento!=8">DESC.</th>
                <th *ngIf="factura.idTipoDocumento!=8">ITBIS</th>
                <th *ngIf="factura.idTipoDocumento!=8" class="text-right">TOTAL</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let detalle of factura.detalle">
                <td>{{detalle.cantidad}}</td>
                <td>PRO-{{detalle.idProducto}}</td>
                <td>{{detalle.nombre}}</td>
                <td *ngIf="factura.idTipoDocumento!=8">{{moneda.simbolo}}{{detalle.precio | number : '1.2-5'}}</td>
                <td *ngIf="factura.idTipoDocumento!=8">{{moneda.simbolo}}{{detalle.descuento | number : '1.2-5'}}</td>
                <td *ngIf="factura.idTipoDocumento!=8">{{moneda.simbolo}}{{detalle.impuestos | number : '1.2-5'}}</td>
                <td *ngIf="factura.idTipoDocumento!=8" class="text-right">{{moneda.simbolo}}{{detalle.total | number : '1.2-5'}}</td>
            </tr>
        </tbody>
    </table>

    <!-- Se ocultan totales y pagos cuando es conduce -->
    <div style="display: flex; justify-content: space-between;">

     <div *ngIf="factura.idTipoDocumento!=8 && (factura.idTipoDocumento==1 || factura.idTipoDocumento==6)" class="totals-section">
      
        <table class="totals-table">
            <tr>
                <td class="total-label">Condición</td>
                <td class="total-amount">{{factura.terminoObj.nombre.toUpperCase()}}</td>
            </tr>
            <tr>
                <td class="total-label">Monto pagado</td>
                <td class="total-amount">{{moneda.simbolo}}{{factura.totalRecibido | number : '1.2-5'}}</td>
            </tr>
             <tr>
                <td class="total-label">Cambio</td>
                <td class="total-amount">{{moneda.simbolo}}{{factura.cambio | number : '1.2-5'}}</td>
            </tr>
        </table>
    </div>

    <div *ngIf="factura.idTipoDocumento!=8" class="totals-section">
        <table class="totals-table">
            <tr>
                <td class="total-label">Subtotal:</td>
                <td class="total-amount">{{moneda.simbolo}}{{factura.subTotal | number : '1.2-5'}}</td>
            </tr>
            <tr>
                <td class="total-label">Descuentos:</td>
                <td class="total-amount">-{{moneda.simbolo}}{{factura.descuento | number : '1.2-5'}}</td>
            </tr>
            <tr>
                <td class="total-label">ITBIS (18%):</td>
                <td class="total-amount">{{moneda.simbolo}}{{factura.itbis | number : '1.2-5'}}</td>
            </tr>
            <tr>
                <td class="total-label grand-total">TOTAL:</td>
                <td class="total-amount grand-total">{{moneda.simbolo}}{{factura.totalGeneral | number : '1.2-5'}}</td>
            </tr>
        </table>
    </div>

    </div>

    <div class="payment-info">
        <div class="bank-info">
            <p>Entregado por: <br> <br><hr></p> 
            <p>Recibido por: <br> <br><hr></p>
        </div>
    </div>
</div>
