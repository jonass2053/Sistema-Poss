<!-- <div class="main-content">
    <div class="main-panel">
    
        <div class="card">
            <div class="card-header">
                <div class="step-indicator">
                    <div class="step-number">1</div>
                    <h2 class="step-title">Información de la Orden</h2>
                </div>
                <p class="card-description">Verifique los datos de la orden de compra</p>
            </div>

            <div class="form-row">
                <mat-form-field class="example-full-width mini-input no-fill-background">
                    <mat-label>Proveedor</mat-label>
                    <input matInput disabled value="Distribuidora Industrial S.A.">
                </mat-form-field>
                <mat-form-field class="mini-input no-fill-background">
                    <mat-label>Fecha de orden</mat-label>
                    <input matInput [matDatepicker]="pickerOne" disabled>
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="pickerOne"></mat-datepicker-toggle>
                    <mat-datepicker #pickerOne></mat-datepicker>
                </mat-form-field>
            </div>

            <div class="form-row">


                <mat-form-field class="mini-input no-fill-background">
                    <mat-label>Fecha de recepción </mat-label>
                    <input matInput [matDatepicker]="pickerTwo">
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matIconSuffix [for]="pickerTwo"></mat-datepicker-toggle>
                    <mat-datepicker #pickerTwo></mat-datepicker>
                </mat-form-field>

            </div>
        </div>


        <div class="card">
            <div class="card-header">
                <div class="step-indicator">
                    <div class="step-number">2</div>
                    <h2 class="step-title">Verificación de Items</h2>
                </div>
                <p class="card-description">Confirme las cantidades recibidas para cada producto</p>
            </div>

            <table class="items-table">
                <thead>
                    <tr>
                        <th>Estado</th>
                        <th>Código</th>
                        <th>Descripción</th>
                        <th>Solicitado</th>
                        <th>Recibido</th>
                        <th>Diferencia</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <span class="status-indicator status-received"></span>
                            Completo
                        </td>
                        <td>PROD-001</td>
                        <td>Tornillos M8 x 20mm</td>
                        <td>500</td>
                        <td><input type="number" class="quantity-input" value="500"></td>
                        <td style="color: var(--success);">0</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="status-indicator status-partial"></span>
                            Parcial
                        </td>
                        <td>PROD-002</td>
                        <td>Tuercas M8</td>
                        <td>500</td>
                        <td><input type="number" class="quantity-input" value="450"></td>
                        <td style="color: var(--destructive);">-50</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="status-indicator status-pending"></span>
                            Pendiente
                        </td>
                        <td>PROD-003</td>
                        <td>Arandelas M8</td>
                        <td>1000</td>
                        <td><input type="number" class="quantity-input" value="0"></td>
                        <td style="color: var(--destructive);">-1000</td>
                    </tr>
                    <tr>
                        <td>
                            <span class="status-indicator status-received"></span>
                            Completo
                        </td>
                        <td>PROD-004</td>
                        <td>Lubricante Industrial 1L</td>
                        <td>24</td>
                        <td><input type="number" class="quantity-input" value="24"></td>
                        <td style="color: var(--success);">0</td>
                    </tr>
                </tbody>
            </table>
        </div>


        <div class="card">
            <div class="card-header">
                <div class="step-indicator">
                    <div class="step-number">3</div>
                    <h2 class="step-title">Observaciones</h2>
                </div>
                <p class="card-description">Registre cualquier incidencia o comentario sobre la recepción</p>
            </div>

           

                <mat-form-field class="example-full-width">
                    <mat-label>Comentarios</mat-label>
                    <textarea matInput
                        placeholder="Ingrese observaciones sobre el estado de la mercancía, faltantes, daños, etc."></textarea>
                </mat-form-field>


          

            <div class="form-row">
                <div class="form-group">

                    <mat-form-field class="example-full-width mini-input no-fill-background">
                        <mat-label>Recibido por</mat-label>
                        <input matInput placeholder="Nombre de quien recibe">
                    </mat-form-field>


                
                </div>
                <div class="form-group">

                    <mat-form-field class="example-full-width mini-input no-fill-background">
                        <mat-label>Transportista</mat-label>
                        <input matInput placeholder="Nombre del transportista">
                    </mat-form-field>
                </div>
            </div>
        </div>
    </div>


    <div class="sidebar">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Resumen de Recepción</h3>
                <p class="card-description">Estado actual de la orden</p>
            </div>

            <div class="summary-item">
                <span class="summary-label">Total de Items</span>
                <span class="summary-value">4</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Items Completos</span>
                <span class="summary-value" style="color: var(--success);">2</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Items Parciales</span>
                <span class="summary-value" style="color: var(--warning);">1</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Items Faltantes</span>
                <span class="summary-value" style="color: var(--destructive);">1</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Estado General</span>
                <span class="summary-value" style="color: var(--warning);">Recepción Parcial</span>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Acciones Requeridas</h3>
            </div>

            <div style="margin-bottom: 1rem;">
                <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">
                    • Contactar proveedor por faltantes
                </p>
                <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">
                    • Generar nota de crédito por diferencias
                </p>
                <p style="font-size: 0.875rem; color: var(--muted-foreground);">
                    • Actualizar inventario con cantidades recibidas
                </p>
            </div>
        </div>
    </div>
</div>

<div class="actions">
    <button class="button button-secondary">Guardar Borrador</button>
    <button class="button button-secondary">Imprimir Reporte</button>
    <button class="button button-primary">Confirmar Recepción</button>
</div> -->

<form [formGroup]="miFormulario">
    <div class="container" *ngIf="ordenCompra!=undefined">
        <div class="main-content">
            <!-- Información de la Orden -->
            <div class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <div *ngIf="ordenCompra!=undefined" class="section-title">{{ordenCompra.contacto.nombreRazonSocial}}
                    </div>
                </div>
                <div class="section-content">
                    <p style="font-size: 12px; color: #6c757d; margin-bottom: 20px;">
                        Verifica los datos de la orden de compra
                    </p>
                    <div class="form-grid">
                        <div class="form-group">

                            <label class="form-label">Proveedor</label>
                            <div class="form-value">{{ordenCompra.contacto.nombreRazonSocial}}</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fecha de Recepción</label>
                            <div class="form-value">{{fechaServer | date : 'dd/MM/YYYY hh:mm:ss'}}</div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fecha de Orden</label>
                            <div *ngIf="ordenCompra!=undefined" class="form-value">{{ordenCompra.fechaCreacion| date :
                                'dd/MM/YYYY hh:mm:ss'}}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Verificación de Items -->
            <div class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <div class="section-title">Verificación de Items</div>
                </div>
                <div class="section-content">
                    <p style="font-size: 12px; color: #6c757d; margin-bottom: 20px;">
                        Confirma las cantidades recibidas para cada producto
                    </p>
                    <table class="items-table">
                        <thead>
                            <tr>
                                <th>Estado</th>
                                <th>Código</th>
                                <th>Descripción</th>
                                <th>Solicitado</th>
                                <th>Recibido</th>
                                <th>Diferencia</th>
                            </tr>
                        </thead>
                        <tbody *ngIf="ordenCompra!=undefined">
                            @for (detalle of ordenCompra.detalle; track $index)
                            {
                            <tr>
                                <td>
                                    <span
                                        *ngIf="detalle.montoProceso.montoRestante==0 && detalle.montoProceso.montoRecibido!=0"
                                        class="status-badge status-completo">
                                        <span class="status-dot"></span>
                                        Completo
                                    </span>

                                    <span *ngIf="detalle.montoProceso.montoRestante!=0"
                                        class="status-badge status-parcial">
                                        <span class="status-dot"></span>
                                        Parcial
                                    </span>


                                    <span *ngIf="detalle.montoProceso.montoRecibido==0"
                                        class="status-badge status-pendiente">
                                        <span class="status-dot"></span>
                                        Pendiente
                                    </span>
                                </td>



                                <td>PROD-{{detalle.idProducto}}</td>
                                <td>{{detalle.producto.nombre}}</td>
                                <td>{{detalle.cantidad}}</td>
                                <td>
                                    <input (focus)="getIndex($index)" type="number"
                                        style="border-radius: 5px; border: 1px solid silver; width: 100px; text-align: center;"
                                        (input)="SumarMontoTotalPagado($event)" [value]=0>
                                </td>
                                <td *ngIf="detalle.montoProceso!=undefined">{{detalle.montoProceso.montoRestante || 0}}
                                </td>
                                <td *ngIf="detalle.montoProceso==undefined" class="difference-zero">0</td>

                            </tr>

                            }
                            <!-- <tr>
                            <td>
                                <span class="status-badge status-completo">
                                    <span class="status-dot"></span>
                                    Completo
                                </span>
                            </td>
                            <td>PROD-001</td>
                            <td>Tornillos M8 x 20mm</td>
                            <td>500</td>
                            <td>499</td>
                            <td class="difference-zero">0</td>
                        </tr>
                        <tr>
                            <td>
                                <span class="status-badge status-parcial">
                                    <span class="status-dot"></span>
                                    Parcial
                                </span>
                            </td>
                            <td>PROD-002</td>
                            <td>Tuercas M8</td>
                            <td>500</td>
                            <td>450</td>
                            <td class="difference-negative">-50</td>
                        </tr>
                        <tr>
                            <td>
                                <span class="status-badge status-pendiente">
                                    <span class="status-dot"></span>
                                    Pendiente
                                </span>
                            </td>
                            <td>PROD-003</td>
                            <td>Arandelas M8</td>
                            <td>1000</td>
                            <td>0</td>
                            <td class="difference-negative">-1000</td>
                        </tr>
                        <tr>
                            <td>
                                <span class="status-badge status-completo">
                                    <span class="status-dot"></span>
                                    Completo
                                </span>
                            </td>
                            <td>PROD-004</td>
                            <td>Lubricante Industrial 1L</td>
                            <td>24</td>
                            <td>24</td>
                            <td class="difference-zero">0</td>
                        </tr> -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Observaciones -->
            <div class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <div class="section-title">Observaciones</div>
                </div>
                <div class="section-content">
                    <p style="font-size: 12px; color: #6c757d; margin-bottom: 15px;">
                        Registra cualquier incidencia o comentario sobre la recepción
                    </p>
                    <textarea class="observations-textarea" placeholder="Comentarios" formControlName="observaciones"></textarea>

                    <div class="signature-section">
                        <div class="signature-field">
                            <div class="signature-label">Recibido por</div>
                        </div>
                        <div class="signature-field">
                            <div class="signature-label">Transportista</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <!-- Resumen de Recepción -->
            <div class="summary-card">
                <div class="summary-header">
                    <div class="summary-title">Resumen de Recepción</div>
                    <div class="summary-subtitle">Estado actual de la orden</div>
                </div>
                <div class="summary-stats">
                    <div class="stat-item">
                        <span class="stat-label">Total de Ítems</span>
                        <span class="stat-value"></span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Ítems Completos</span>
                        <span class="stat-value">{{itemsCompletos}}</span>
                    </div>
                    <div class="stat-item">

                        <span class="stat-label">Ítems Parciales</span>
                        <span class="stat-value">{{itemsParciales}}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Ítems Faltantes</span>
                        <span class="stat-value">{{itemsPendientes}}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Estado General</span>
                        <span *ngIf="itemsParciales!=0 || itemsPendientes!=0" class="stat-value"
                            style="color: #ffc107;">Recepción Parcial</span>
                        <span *ngIf="itemsParciales==0 && itemsPendientes==0" class="stat-value"
                            style="color: #059c2b;">Recepción Completa</span>

                    </div>
                </div>
            </div>

            <!-- Acciones Requeridas -->
            <div class="actions-card">
                <div class="actions-header">
                    <div class="actions-title">Acciones Requeridas</div>
                </div>
                <div class="actions-list">
                    <div class="action-item">
                        <span class="action-bullet">•</span>
                        <span>Contactar proveedor por faltantes</span>
                    </div>
                    <div class="action-item">
                        <span class="action-bullet">•</span>
                        <span>Generar nota de crédito por diferencias</span>
                    </div>
                    <div class="action-item">
                        <span class="action-bullet">•</span>
                        <span>Actualizar inventario con cantidades recibidas</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="centerall">
            <button color="primary" mat-raised-button class="me-8 mb-8">Imprimir reporte de recepción
                <mat-icon>print</mat-icon> </button>
            <button (click)="save()" color="primary" mat-raised-button class="me-8 mb-8">Guardar
                <mat-icon>save</mat-icon> nuevo</button>
            <button color="primary" mat-raised-button class="me-8 mb-8">Cancelar
                <mat-icon>cancel</mat-icon></button>
        </div>

    </div>

</form>